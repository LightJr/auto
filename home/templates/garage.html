{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AUTO REPUBLIC - Garage</title>
	<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" >
	<link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet" >
	<link href="{% static 'css/global.css' %}" rel="stylesheet">
	<link href="{% static 'css/contact.css' %}" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
	<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>

</head>
<body>

<!-- Loader global -->
<div id="globalLoader" style="display: none !important; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(5px); z-index: 9998; justify-content: center; align-items: center;">
    <div class="card shadow-lg" style="background-color: white; padding: 30px; border-radius: 10px; text-align: center; max-width: 400px; z-index: 10000;">
        <div class="spinner-border mb-3" role="status" style="width: 3rem; height: 3rem; border-color: #dc3545; border-right-color: transparent;">
            <span class="visually-hidden">Chargement...</span>
        </div>
        <h5 class="text-dark mb-0" id="loaderMessage">Traitement en cours...</h5>
    </div>
</div>

<!-- Container pour les notifications -->
<div id="notificationContainer" style="position: fixed; top: 20px; right: 20px; z-index: 10000;"></div>


<div class="main_o clearfix position-relative">
 <div class="main_1 clearfix position-absolute top-0 w-100">
   <section id="header">
<nav class="navbar navbar-expand-md navbar-light" id="navbar_sticky">
  <div class="container-xl">
    <a class="navbar-brand fs-3 p-0 fw-bold text-white" href="{% url 'index' %}"><i class="fa fa-car col_oran me-1 fs-2 align-middle"></i> AUTO <br> <span class="fs-5 span_1">REPUBLIC</span></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mb-0 ">
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="{% url 'index' %}">Home</a>
        </li>
		<li class="nav-item">
          <a class="nav-link" href="{% url 'about' %}">About </a>
        </li>
		<li class="nav-item">
          <a class="nav-link" href="{% url 'models' %}">Vehicle Models </a>
        </li>
		<li class="nav-item">
          <a class="nav-link" href="{% url 'contact' %}">Contact</a>
        </li>
		<li class="nav-item">
          <a class="nav-link active" href="{% url 'garage' %}">Garage</a>
        </li>
      </ul>
	  <ul class="navbar-nav mb-0 ms-auto">
		<li class="nav-item">
          <a class="nav-link button_2 ms-2 me-2" href="{% url 'contact' %}">Contact <i class="fa fa-check-circle ms-1"></i></a>
        </li>
      </ul>
    </div>
  </div>
</nav>
</section>
 </div>
 <div class="main_2 clearfix">
<section id="center" class="center_contact">
  <div class="center_om clearfix">
    <div class="container-xl">
 <div class="row center_o1">
  <div class="col-md-12">
     <h2 class="text-white">Nos Garages</h2>
	  <h6 class="mb-0 mt-3 fw-normal col_oran"><a class="text-light" href="{% url 'index' %}">Home</a> <span class="mx-2 col_light">/</span> Garage</h6>
  </div>
 </div>
</div>
  </div>
</section>
 </div>
</div>

<section id="garage-services" class="py-5">
 <div class="container-xl">
  <div class="row contact_1 mb-5">
   <div class="col-md-12">
     <h2 class="text-center">Nos Services de Garage</h2>
	 <hr class="line_1">
	 <p class="text-center">Découvrez nos services professionnels et nos différentes adresses pour prendre soin de votre véhicule.</p>
   </div>
  </div>
  <div class="row contact_2 mt-4">
   <div class="col-md-4 mb-4">
     <div class="contact_2i text-center h-100">
	   <div class="contact_2il">
	     <span><i class="fa fa-wrench col_oran"></i></span>
	   </div>
	   <h5>Réparation Mécanique</h5>
	   <p>Diagnostic complet, réparation moteur, transmission, freinage et système électrique.</p>
	 </div>
   </div>
   <div class="col-md-4 mb-4">
     <div class="contact_2i text-center h-100">
	   <div class="contact_2il">
	     <span><i class="fa fa-cog col_oran"></i></span>
	   </div>
	   <h5>Entretien Préventif</h5>
	   <p>Vidange, filtres, bougies, courroies et maintenance régulière de votre véhicule.</p>
	 </div>
   </div>
   <div class="col-md-4 mb-4">
     <div class="contact_2i text-center h-100">
	   <div class="contact_2il">
	     <span><i class="fa fa-shield col_oran"></i></span>
	   </div>
	   <h5>Contrôle Technique</h5>
	   <p>Préparation et passage du contrôle technique dans nos centres agréés.</p>
	 </div>
   </div>
  </div>
  <div class="row contact_2 mt-4">
   <div class="col-md-4 mb-4">
     <div class="contact_2i text-center h-100">
	   <div class="contact_2il">
	     <span><i class="fa fa-car col_oran"></i></span>
	   </div>
	   <h5>Carrosserie</h5>
	   <p>Réparation de carrosserie, peinture, débosselage et remise en état esthétique.</p>
	 </div>
   </div>
   <div class="col-md-4 mb-4">
     <div class="contact_2i text-center h-100">
	   <div class="contact_2il">
	     <span><i class="fa fa-tools col_oran"></i></span>
	   </div>
	   <h5>Pneumatiques</h5>
	   <p>Montage, équilibrage, géométrie et vente de pneus toutes marques.</p>
	 </div>
   </div>
   <div class="col-md-4 mb-4">
     <div class="contact_2i text-center h-100">
	   <div class="contact_2il">
	     <span><i class="fa fa-bolt col_oran"></i></span>
	   </div>
	   <h5>Dépannage 24h/24</h5>
	   <p>Service de dépannage et remorquage disponible 24h sur 24, 7j sur 7.</p>
	 </div>
   </div>
  </div>
 </div>
</section>

<section id="garage-addresses" class="py-5">
 <div class="container-xl">
  <div class="row contact_1 mb-5">
   <div class="col-md-12">
     <h2 class="text-center">Nos Adresses</h2>
	 <hr class="line_1">
	 <p class="text-center">Retrouvez-nous dans nos trois garages répartis dans la région.</p>
   </div>
  </div>
  <div class="row contact_2 mt-4">
   <div class="col-md-4 mb-4">
     <div class="contact_2i h-100">
	   <div class="contact_2il">
	     <span><i class="fa fa-map-marker col_oran"></i></span>
	   </div>
	   <h5>Garage Principal</h5>
	   <p><strong>Adresse :</strong><br>Croisement avenues Forces Armées et Dracena, Ombe, Kinshasa, Congo</p>
	   <p><strong>Téléphone :</strong><br>+243 819635442</p>
	   <p><strong>Horaires :</strong><br>Lun-Ven: 8h-18h<br>Sam: 8h-12h</p>
	 </div>
   </div>
   <div class="col-md-4 mb-4">
     <div class="contact_2i h-100">
	   <div class="contact_2il">
	     <span><i class="fa fa-map-marker col_oran"></i></span>
	   </div>
	   <h5>Garage Nord</h5>
	   <p><strong>Adresse :</strong><br>Croisement avenues Forces Armées et Dracena, Ombe, Kinshasa, Congo</p>
	   <p><strong>Téléphone :</strong><br>+243 819635442</p>
	   <p><strong>Horaires :</strong><br>Lun-Ven: 7h30-19h<br>Sam: 8h-13h</p>
	 </div>
   </div>
   <div class="col-md-4 mb-4">
     <div class="contact_2i h-100">
	   <div class="contact_2il">
	     <span><i class="fa fa-map-marker col_oran"></i></span>
	   </div>
	   <h5>Garage Sud</h5>
	   <p><strong>Adresse :</strong><br>Croisement avenues Forces Armées et Dracena, Ombe, Kinshasa, Congo</p>
	   <p><strong>Téléphone :</strong><br>+243 819635442</p>
	   <p><strong>Horaires :</strong><br>Lun-Ven: 8h-18h30<br>Sam: 8h-12h</p>
	 </div>
   </div>
  </div>
 </div>
</section>

<section id="footer" class="pt-3 pb-3">
	<div class="container-xl">
	  <div class="row footer_1">
		<div class="col-md-4">
		 <div class="footer_1i">
		  <h4><a href="{% url 'index' %}"><i class="fa fa-car col_oran "></i> AUTO  <span class="fw-normal"></span>REPUBLIC</a></h4>
		  <p class="mt-3">Utiliser la sécurisation confinée de ses volets.</p>
		  <h6 class="mt-3 fw-normal"><i class="fa fa-map col_oran me-1"></i> Croisement avenues Forces Armées et Dracena, Ombe, Kinshasa, Congo</h6>
		  <h6 class="mt-3 fw-normal"><a href="#"><i class="fa fa-phone col_oran me-1"></i> +243 819635442 </a></h6>
		  <h6 class="mt-3 mb-0 fw-normal"><a href="#"><i class="fa fa-envelope col_oran me-1"></i> AutoRepublic@gmail.com</a></h6>
		 </div>
		</div>
	
		<div class="col-md-4">
		 <div class="footer_1i">
		  <h4>WORK HOURS</h4>
		  <p class="mt-3">Lun - Vend: <span class="fw-bold text-black">09:00AM - 09:00PM</span></p>
		  <p class="mt-3">Sam: <span class="fw-bold text-black">09:00AM - 06:00PM</span></p>
		  <p class="mt-3 mb-0">Dim: <span class="fw-bold text-black">Closed</span></p>
		 </div>
		</div>
		<div class="col-md-4">
		 <div class="footer_1i">
		  <h4>Abonnez-vous</h4>
		  <p class="mt-3">Abonnez-vous à votre adresse e-mail pour recevoir les dernières nouvelles et mises à jour.</p>
		  <form id="newsletterForm">
			{% csrf_token %}
			<input class="form-control" placeholder="Entrez votre adresse email" type="email" name="email" id="newsletterEmail" required>
			<h6 class="mb-0 mt-4"><a class="button pt-3 pb-3" href="#" id="submitNewsletter">S'abonner <i class="fa fa-check-circle ms-1"></i> </a></h6>
		  </form>
		 </div>
		</div>
	  </div><hr>
	  <div class="row footer_2">
	   <div class="col-md-8">
		<div class="footer_2l">
		 <p class="mb-0 mt-1">© 2025 AUTO REPUBLIC. All Rights Reserved | Design by <a class="col_green" href="http://www.templateonweb.com">LeSage</a></p>
		</div>
	   </div>
	   <div class="col-md-4">
		<div class="footer_2r text-end">
		  <ul class="social-network social-circle mb-0">
						<li><a href="https://www.instagram.com/autorepublicrdc?igsh=eHFpZjBjZmJoaGc4" class="icoInstagram" title="Instagram" target="_blank"><i class="fa fa-instagram"></i></a></li>
						<li><a href="https://www.facebook.com/share/1BS9PFUVqW/?mibextid=wwXIfr" class="icoFacebook" title="Facebook" target="_blank"><i class="fa fa-facebook"></i></a></li>
					</ul>
		</div>
	   </div>
	  </div>
	</div>
	</section>

<script>
// Variables globales pour le loader
let loaderStartTime = null;

// Fonction pour afficher le loader
function showGlobalLoader(message = 'Traitement en cours...') {
    const loader = document.getElementById('globalLoader');
    const loaderMessage = document.getElementById('loaderMessage');
    
    if (loader && loaderMessage) {
        loaderMessage.textContent = message;
        loader.style.setProperty('display', 'flex', 'important');
        loader.style.setProperty('visibility', 'visible', 'important');
        loader.style.setProperty('opacity', '1', 'important');
        loader.style.setProperty('z-index', '9999', 'important');
        
        // Empêcher les interactions avec le reste de la page
        document.body.style.pointerEvents = 'none';
        document.body.style.userSelect = 'none';
        
        // Enregistrer le temps de début
        loaderStartTime = Date.now();
        
        console.log('Affichage du loader:', message);
    }
}

// Fonction pour masquer le loader
function hideGlobalLoader() {
    const loader = document.getElementById('globalLoader');
    
    if (loader) {
        // Calculer le temps écoulé
        const elapsed = loaderStartTime ? Date.now() - loaderStartTime : 0;
        const minDelay = 500; // Délai minimum de 500ms
        
        if (elapsed < minDelay) {
            // Attendre le temps restant
            setTimeout(() => {
                loader.style.setProperty('display', 'none', 'important');
                loader.style.setProperty('visibility', 'hidden', 'important');
                loader.style.setProperty('opacity', '0', 'important');
                
                // Restaurer les interactions
                document.body.style.pointerEvents = 'auto';
                document.body.style.userSelect = 'auto';
                
                console.log('Loader masqué');
            }, minDelay - elapsed);
        } else {
            // Masquer immédiatement
            loader.style.setProperty('display', 'none', 'important');
            loader.style.setProperty('visibility', 'hidden', 'important');
            loader.style.setProperty('opacity', '0', 'important');
            
            // Restaurer les interactions
            document.body.style.pointerEvents = 'auto';
            document.body.style.userSelect = 'auto';
            
            console.log('Loader masqué');
        }
    }
}

// Fonction pour afficher une notification
function showNotification(message, type = 'success') {
    const container = document.getElementById('notificationContainer');
    if (!container) return;
    
    const notification = document.createElement('div');
    notification.className = `alert alert-${type === 'success' ? 'success' : 'danger'} alert-dismissible fade show`;
    notification.style.cssText = 'margin-bottom: 10px; max-width: 400px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);';
    
    notification.innerHTML = `
        <strong>${type === 'success' ? '✅ Succès' : '❌ Erreur'}</strong><br>
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    `;
    
    container.appendChild(notification);
    
    // Auto-suppression après 4 secondes
    setTimeout(() => {
        if (notification.parentNode) {
            notification.remove();
        }
    }, 4000);
}

// Gestionnaire pour le formulaire de newsletter
document.addEventListener('DOMContentLoaded', function() {
    const submitNewsletter = document.getElementById('submitNewsletter');
    const newsletterForm = document.getElementById('newsletterForm');
    
    if (submitNewsletter && newsletterForm) {
        submitNewsletter.addEventListener('click', function(e) {
            e.preventDefault();
            
            const emailInput = document.getElementById('newsletterEmail');
            if (!emailInput || !emailInput.value.trim()) {
                showNotification('Veuillez entrer une adresse email valide.', 'error');
                return;
            }
            
            // Validation basique de l'email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(emailInput.value.trim())) {
                showNotification('Veuillez entrer une adresse email valide.', 'error');
                return;
            }
            
            // Afficher le loader
            showGlobalLoader('Abonnement à la newsletter...');
            
            // Désactiver le bouton
            submitNewsletter.style.pointerEvents = 'none';
            submitNewsletter.style.opacity = '0.6';
            
            // Préparer les données
            const formData = new FormData();
            formData.append('email', emailInput.value.trim());
            formData.append('csrfmiddlewaretoken', document.querySelector('[name=csrfmiddlewaretoken]').value);
            
            // Envoyer la requête
            fetch('{% url "create_newsletter_subscription" %}', {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification(data.message, 'success');
                    newsletterForm.reset();
                } else {
                    showNotification(data.message, 'error');
                }
            })
            .catch(error => {
                console.error('Erreur:', error);
                showNotification('Une erreur est survenue. Veuillez réessayer.', 'error');
            })
            .finally(() => {
                hideGlobalLoader();
                submitNewsletter.style.pointerEvents = 'auto';
                submitNewsletter.style.opacity = '1';
            });
        });
    }
});

$(document).ready(function(){
	/*****Fixed Menu******/
	var secondaryNav = $('.cd-secondary-nav'),
	   secondaryNavTopPosition = secondaryNav.offset().top;
		$(window).on('scroll', function(){
			if($(window).scrollTop() > secondaryNavTopPosition ) {
				secondaryNav.addClass('is-fixed');
			} else {
				secondaryNav.removeClass('is-fixed');
			}
		});
});
</script>

</body>
</html>
