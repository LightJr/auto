{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Contact - AUTO REPUBLIC</title>
	<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet" >
	<link href="{% static 'css/font-awesome.min.css' %}" rel="stylesheet" >
	<link href="{% static 'css/global.css' %}" rel="stylesheet">
	<link href="{% static 'css/contact.css' %}" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
	<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>

</head>
<body>

<!-- Système de notifications -->
<div id="notificationContainer" class="position-fixed" style="top: 20px; right: 20px; z-index: 9999;">
  <!-- Les notifications apparaîtront ici -->
</div>

<!-- Loader global -->
<div id="globalLoader" class="position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center" style="background-color: rgba(0,0,0,0.8); backdrop-filter: blur(5px); z-index: 9999; display: none;">
  <div class="card shadow-lg border-0" style="background-color: white; border-radius: 15px; padding: 2rem; min-width: 300px; max-width: 400px;">
    <div class="text-center">
      <div class="spinner-border mb-3" role="status" style="width: 3rem; height: 3rem; border-color: #dc3545; border-right-color: transparent;">
        <span class="visually-hidden">Chargement...</span>
      </div>
      <h5 class="text-dark mb-2">Traitement en cours...</h5>
      <p class="text-muted mb-0">Veuillez patienter</p>
    </div>
  </div>
</div>


<div class="main_o clearfix position-relative">
 <div class="main_1 clearfix position-absolute top-0 w-100">
   <section id="header">
<nav class="navbar navbar-expand-md navbar-light" id="navbar_sticky">
  <div class="container-xl">
    <a class="navbar-brand fs-3 p-0 fw-bold text-white" href="{% url 'index' %}"><i class="fa fa-car col_oran me-1 fs-2 align-middle"></i> AUTO <br> <span class="fs-5 span_1">REPUBLIC</span></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mb-0 ">
        <li class="nav-item">
          <a class="nav-link" aria-current="page" href="{% url 'index' %}">Accueil</a>
        </li>
		<li class="nav-item">
          <a class="nav-link" href="{% url 'about' %}">À propos</a>
        </li>
		<li class="nav-item">
          <a class="nav-link" href="{% url 'models' %}">Modèles de véhicules</a>
        </li>


		<li class="nav-item">
          <a class="nav-link active" href="{% url 'contact' %}">Contact</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'garage' %}">Garage</a>
          </li>
      </ul>
	  <ul class="navbar-nav mb-0 ms-auto">
		<li class="nav-item">
          <a class="nav-link button_2 ms-2 me-2" href="{% url 'models' %}">Modèles de véhicules <i class="fa fa-check-circle ms-1"></i></a>
        </li>
		
      </ul>
    </div>
  </div>
</nav>
</section>
 </div>
 <div class="main_2 clearfix">
 <section id="center" class="center_contact">
   <div class="center_om clearfix">
     <div class="container-xl">
  <div class="row center_o1">
   <div class="col-md-12">
      <h2 class="text-white">Contact</h2>
		  <h6 class="mb-0 mt-3 fw-normal col_oran"><a class="text-light" href="{% url 'index' %}">Accueil</a> <span class="mx-2 col_light">/</span> Contact</h6>
   </div>
  </div>
 </div>
   </div>
 </section>
 </div>
 
</div>

<section id="contact" class="p_3">
 <div class="container-xl">
   <div class="contact_1 row">
    <div class="col-md-4 col-sm-4">
	   <div class="contact_1i row bg_light ms-1 me-1 ps-2 pe-2 pt-4 pb-4">
	  <div class="col-md-3">
	   <div class="contact_1il">
	    <span class="d-inline-block bg_oran text-white text-center rounded-circle fs-2"><i class="fa fa-map"></i></span>
	   </div>
	  </div>
	  <div class="col-md-9">
	   <div class="contact_1ir">
	    <h5>Notre adresse</h5>
		<p class="mb-0 fs-6">Croisement avenues Forces Armées et Dracena, Ombe, Kinshasa, Congo</p>
	   </div>
	  </div>
	 </div>
	</div>
	<div class="col-md-4 col-sm-4">
	   <div class="contact_1i row bg_light ms-1 me-1 ps-2 pe-2 pt-4 pb-4">
	  <div class="col-md-3">
	   <div class="contact_1il">
	    <span class="d-inline-block bg_oran text-white text-center rounded-circle fs-2"><i class="fa fa-phone"></i></span>
	   </div>
	  </div>
	  <div class="col-md-9">
	   <div class="contact_1ir">
	    <h5>Numéro de téléphone</h5>
		<p class="mb-0 fs-6"> +243 819635442</p>
	   </div>
	  </div>
	 </div>
	</div>
	<div class="col-md-4 col-sm-4">
	   <div class="contact_1i row bg_light ms-1 me-1 ps-2 pe-2 pt-4 pb-4">
	  <div class="col-md-3">
	   <div class="contact_1il">
	    <span class="d-inline-block bg_oran text-white text-center rounded-circle fs-2"><i class="fa fa-envelope"></i></span>
	   </div>
	  </div>
	  <div class="col-md-9">
	   <div class="contact_1ir">
	    <h5>Envoyez-nous un email</h5>
		<p class="mb-0 fs-6">AutoRepublic@gmail.com</p>
	   </div>
	  </div>
	 </div>
	</div>
   </div>
   <div class="contact_2 row mt-5">
    <div class="col-md-5">
	 <div class="contact_2l">
	   <h5 class="col_oran">Entrez en contact</h5>
	   <h1 class="font_50 mt-3">Avez-vous des <br> questions ?</h1>
	   <p class="mt-3">Notre équipe d'experts est là pour vous accompagner dans tous vos besoins de location et d'achat de véhicules. Nous offrons un service personnalisé et des conseils professionnels pour vous aider à faire le meilleur choix.</p>
	   <ul class="social-network social-circle mb-0 mt-3">
					<li><a href="https://www.instagram.com/autorepublicrdc?igsh=eHFpZjBjZmJoaGc4" class="icoInstagram" title="Instagram" target="_blank"><i class="fa fa-instagram"></i></a></li>
					<li><a href="https://www.facebook.com/share/1BS9PFUVqW/?mibextid=wwXIfr" class="icoFacebook" title="Facebook" target="_blank"><i class="fa fa-facebook"></i></a></li>
				</ul>
	 </div>
	</div>
	<div class="col-md-7">
	 <div class="contact_2r">
	   <form id="contactForm">
	     {% csrf_token %}
		 <div class="blog_1rdt3i2 row">
		 <div class="col-md-6">
		  <div class="blog_1rdt3i2l">
		    <label class="form-label">Nom *</label>
		    <input class="form-control" placeholder="Votre nom" type="text" name="name" id="contactName" required>
		  </div>
		 </div> 
		 <div class="col-md-6">
		  <div class="blog_1rdt3i2l">
		    <label class="form-label">Email *</label>
		    <input class="form-control" placeholder="Votre email" type="email" name="email" id="contactEmail" required>
		  </div>
		 </div>
		</div>
		<div class="blog_1rdt3i2 row mt-3">
		 <div class="col-md-6">
		  <div class="blog_1rdt3i2l">
		    <label class="form-label">Sujet *</label>
		    <input class="form-control" placeholder="Sujet de votre message" type="text" name="subject" id="contactSubject" required>
		  </div>
		 </div> 
		 <div class="col-md-6">
		  <div class="blog_1rdt3i2l">
		    <label class="form-label">Site web</label>
		    <input class="form-control" placeholder="Votre site web (optionnel)" type="url" name="website" id="contactWebsite">
		  </div>
		 </div>
		</div>
		<div class="blog_1rdt3i2 row mt-3">
		 <div class="col-md-12">
		  <div class="blog_1rdt3i2l">
		    <label class="form-label">Message *</label>
		    <textarea placeholder="Votre message" class="form-control form_text" name="message" id="contactMessage" required></textarea>
			<h6 class="mt-3 mb-0"><a class="button" href="#" id="submitContact">Envoyer maintenant <i class="fa fa-check-circle ms-1"></i></a></h6>
		  </div>
		 </div> 
		</div>
	   </form>
	 </div>
	</div>
   </div>
 </div>
</section>

<section id="ride">
<div class="ride_m">
 <div class="container-xl">
 <div class="row ride_1">
  <div class="col-md-8">
   <div class="ride_1l">
    <h1 class="text-white">Économisez avec notre <br> location de voitures !</h1>
	<p class="text-light mb-0 fs-4 mt-3">Meilleurs prix. Fournisseurs locaux. Support 24h/24.</p>
   </div>
  </div>
  <div class="col-md-4">
   <div class="ride_1r  text-end">
     <h6 class="text-white"><i class="fa fa-phone me-1"></i> Appelez pour réserver</h6>
     <h6 class="mb-0 mt-3"><a class="button_2" href="{% url 'models' %}">Réserver maintenant <i class="fa fa-check-circle ms-1"></i> </a></h6>
	 <h3 class="col_oran mt-3 mb-0">+243 819635442</h3>
   </div>
  </div>
 </div>
</div>
</div>
</section>

<section id="footer" class="pt-3 pb-3">
  <div class="container-xl">
    <div class="row footer_1">
      <div class="col-md-4">
     <div class="footer_1i">
      <h4><a href="{% url 'index' %}"><i class="fa fa-car col_oran "></i> AUTO  <span class="fw-normal"></span>REPUBLIC</a></h4>
      <p class="mt-3">Utiliser la sécurisation confinée de ses volets.</p>
      <h6 class="mt-3 fw-normal"><i class="fa fa-map col_oran me-1"></i> Croisement avenues Forces Armées et Dracena, Ombe, Kinshasa, Congo</h6>
      <h6 class="mt-3 fw-normal"><a href="#"><i class="fa fa-phone col_oran me-1"></i> +243 819635442 </a></h6>
      <h6 class="mt-3 mb-0 fw-normal"><a href="#"><i class="fa fa-envelope col_oran me-1"></i> AutoRepublic@gmail.com</a></h6>
     </div>
    </div>
  
    <div class="col-md-4">
     <div class="footer_1i">
      <h4>HEURES D'OUVERTURE</h4>
        <p class="mt-3">Lun - Ven: <span class="fw-bold text-black">09:00 - 21:00</span></p>
      <p class="mt-3">Sam: <span class="fw-bold text-black">09:00 - 18:00</span></p>
      <p class="mt-3 mb-0">Dim: <span class="fw-bold text-black">Fermé</span></p>
     </div>
    </div>
    <div class="col-md-4">
     <div class="footer_1i">
      <h4>Abonnez-vous</h4>
        <p class="mt-3">Abonnez-vous à votre adresse e-mail pour recevoir les dernières nouvelles et mises à jour.</p>
      <form id="newsletterForm">
      {% csrf_token %}
      <input class="form-control" placeholder="Entrez votre adresse email" type="email" name="email" id="newsletterEmail" required>
      <h6 class="mb-0 mt-4"><a class="button pt-3 pb-3" href="#" id="submitNewsletter">S'abonner <i class="fa fa-check-circle ms-1"></i> </a></h6>
      </form>
     </div>
    </div>
    </div><hr>
    <div class="row footer_2">
     <div class="col-md-8">
      <div class="footer_2l">
     <p class="mb-0 mt-1">© 2025 AUTO REPUBLIC. Tous droits réservés | Design par <a class="col_green" href="http://www.templateonweb.com">LeSage</a></p>
    </div>
     </div>
     <div class="col-md-4">
      <div class="footer_2r text-end">
      <ul class="social-network social-circle mb-0">
            <li><a href="https://www.instagram.com/autorepublicrdc?igsh=eHFpZjBjZmJoaGc4" class="icoInstagram" title="Instagram" target="_blank"><i class="fa fa-instagram"></i></a></li>
            <li><a href="https://www.facebook.com/share/1BS9PFUVqW/?mibextid=wwXIfr" class="icoFacebook" title="Facebook" target="_blank"><i class="fa fa-facebook"></i></a></li>
          </ul>
    </div>
     </div>
    </div>
  </div>
  </section>

<script>
// Script pour gérer le formulaire de contact
document.addEventListener('DOMContentLoaded', function() {
    
    // Fonction pour afficher/masquer le loader global avec délai minimum
    function showGlobalLoader(message = 'Traitement en cours...') {
        console.log('Affichage du loader:', message);
        const loader = document.getElementById('globalLoader');
        const messageElement = loader.querySelector('h5');
        messageElement.textContent = message;
        
        // Forcer l'affichage avec !important
        loader.style.setProperty('display', 'flex', 'important');
        loader.style.setProperty('visibility', 'visible', 'important');
        loader.style.setProperty('opacity', '1', 'important');
        loader.style.setProperty('z-index', '9999', 'important');
        
        // Empêcher les clics sur le body
        document.body.style.pointerEvents = 'none';
        document.body.style.userSelect = 'none';
        console.log('Loader affiché - z-index:', loader.style.zIndex);
        
        // Enregistrer le temps de début
        loader.dataset.startTime = Date.now();
    }
    
    function hideGlobalLoader() {
        console.log('Masquage du loader');
        const loader = document.getElementById('globalLoader');
        const startTime = parseInt(loader.dataset.startTime || '0');
        const elapsed = Date.now() - startTime;
        const minDelay = 500; // Délai minimum de 500ms
        
        const hideLoader = () => {
            loader.style.setProperty('display', 'none', 'important');
            loader.style.setProperty('visibility', 'hidden', 'important');
            loader.style.setProperty('opacity', '0', 'important');
            
            // Restaurer les clics sur le body
            document.body.style.pointerEvents = 'auto';
            document.body.style.userSelect = 'auto';
            console.log('Loader masqué');
        };
        
        // Si la requête a pris moins de 500ms, attendre un peu
        if (elapsed < minDelay) {
            setTimeout(hideLoader, minDelay - elapsed);
        } else {
            hideLoader();
        }
    }
    
    // Fonction pour afficher une notification
    function showNotification(message, type = 'success') {
        const container = document.getElementById('notificationContainer');
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        
        const notificationId = 'notification-' + Date.now();
        notification.id = notificationId;
        
        notification.innerHTML = `
            <button class="close-btn" onclick="closeNotification('${notificationId}')">&times;</button>
            <div class="message">${message}</div>
            <div class="countdown" id="countdown-${notificationId}">Fermeture automatique dans 4s</div>
        `;
        
        container.appendChild(notification);
        
        // Animation d'entrée
        setTimeout(() => {
            notification.classList.add('show');
        }, 100);
        
        // Décompte et fermeture automatique
        let countdown = 4;
        const countdownElement = document.getElementById(`countdown-${notificationId}`);
        const countdownInterval = setInterval(() => {
            countdown--;
            countdownElement.textContent = `Fermeture automatique dans ${countdown}s`;
            
            if (countdown <= 0) {
                clearInterval(countdownInterval);
                closeNotification(notificationId);
            }
        }, 1000);
    }
    
    // Fonction pour fermer une notification
    window.closeNotification = function(notificationId) {
        const notification = document.getElementById(notificationId);
        if (notification) {
            notification.classList.remove('show');
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }
    };
    
    // Gérer la soumission du formulaire de contact
    document.getElementById('submitContact').addEventListener('click', function(e) {
        e.preventDefault();
        
        const form = document.getElementById('contactForm');
        const submitBtn = this;
        
        // Validation basique
        if (!form.checkValidity()) {
            form.reportValidity();
            return;
        }
        
        // Afficher le loader global
        showGlobalLoader('Envoi de votre message...');
        submitBtn.style.pointerEvents = 'none';
        
        // Préparer les données
        const formData = new FormData(form);
        
        // Envoyer la requête
        fetch('{% url "create_contact_message" %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                showNotification(data.message, 'success');
                form.reset();
            } else {
                showNotification(data.message, 'error');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            showNotification('Une erreur est survenue. Veuillez réessayer.', 'error');
        })
        .finally(() => {
            // Masquer le loader et restaurer le bouton
            hideGlobalLoader();
            submitBtn.style.pointerEvents = 'auto';
        });
    });
});

// Script pour la navbar sticky
window.onscroll = function() {myFunction()};

var navbar_sticky = document.getElementById("navbar_sticky");
var sticky = navbar_sticky.offsetTop;
var navbar_height = document.querySelector('.navbar').offsetHeight;

function myFunction() {
  if (window.pageYOffset >= sticky + navbar_height) {
    navbar_sticky.classList.add("sticky")
	document.body.style.paddingTop = navbar_height + 'px';
  } else {
    navbar_sticky.classList.remove("sticky");
	document.body.style.paddingTop = '0'
  }
}
</script>

<style>
/* Styles pour les labels du formulaire de contact */
.form-label {
    font-weight: 600;
    color: #495057;
    margin-bottom: 5px;
    display: block;
}

.form-label:after {
    content: '';
}

/* Améliorer l'apparence des champs obligatoires */
.form-control:required {
    border-left: 3px solid #dc3545;
}

/* Animations pour les notifications */
.notification {
    margin-bottom: 10px;
    padding: 15px 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    transform: translateX(100%);
    opacity: 0;
    transition: all 0.3s ease-in-out;
    max-width: 350px;
}

.notification.show {
    transform: translateX(0);
    opacity: 1;
}

.notification.success {
    background-color: #d4edda;
    border: 1px solid #c3e6cb;
    color: #155724;
}

.notification.error {
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    color: #721c24;
}

.notification .close-btn {
    float: right;
    background: none;
    border: none;
    font-size: 18px;
    cursor: pointer;
    opacity: 0.7;
}

.notification .close-btn:hover {
    opacity: 1;
}

.notification .countdown {
    font-size: 12px;
    opacity: 0.7;
    margin-top: 5px;
}

/* Améliorer le loader */
#globalLoader {
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 9999 !important;
    background-color: rgba(0,0,0,0.8) !important;
    display: none !important;
}

#globalLoader .card {
    animation: fadeInScale 0.3s ease-out;
    position: relative !important;
    z-index: 10000 !important;
    background-color: white !important;
    border: none !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.3) !important;
}

#globalLoader .spinner-border {
    border-color: #dc3545 !important;
    border-right-color: transparent !important;
    animation: spin 1s linear infinite !important;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes fadeInScale {
    from {
        opacity: 0;
        transform: scale(0.8);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}
</style>

<script>
// Variables globales pour le loader
let loaderStartTime = null;

// Fonction pour afficher le loader
function showGlobalLoader(message = 'Traitement en cours...') {
    const loader = document.getElementById('globalLoader');
    const loaderMessage = document.getElementById('loaderMessage');
    
    if (loader && loaderMessage) {
        loaderMessage.textContent = message;
        loader.style.setProperty('display', 'flex', 'important');
        loader.style.setProperty('visibility', 'visible', 'important');
        loader.style.setProperty('opacity', '1', 'important');
        loader.style.setProperty('z-index', '9999', 'important');
        
        document.body.style.pointerEvents = 'none';
        document.body.style.userSelect = 'none';
        
        loaderStartTime = Date.now();
        
        console.log('Affichage du loader:', message);
    }
}

// Fonction pour masquer le loader
function hideGlobalLoader() {
    const loader = document.getElementById('globalLoader');
    
    if (loader) {
        const elapsed = loaderStartTime ? Date.now() - loaderStartTime : 0;
        const minDelay = 500; 
        
        if (elapsed < minDelay) {
            setTimeout(() => {
                loader.style.setProperty('display', 'none', 'important');
                loader.style.setProperty('visibility', 'hidden', 'important');
                loader.style.setProperty('opacity', '0', 'important');
                
                document.body.style.pointerEvents = 'auto';
                document.body.style.userSelect = 'auto';
                
                console.log('Loader masqué');
            }, minDelay - elapsed);
        } else {
            loader.style.setProperty('display', 'none', 'important');
            loader.style.setProperty('visibility', 'hidden', 'important');
            loader.style.setProperty('opacity', '0', 'important');
            
            document.body.style.pointerEvents = 'auto';
            document.body.style.userSelect = 'auto';
            
            console.log('Loader masqué');
        }
    }
}

// Fonction pour afficher une notification
function showNotification(message, type = 'success') {
    const container = document.getElementById('notificationContainer');
    if (!container) return;
    
    const notification = document.createElement('div');
    notification.className = `alert alert-${type === 'success' ? 'success' : 'danger'} alert-dismissible fade show`;
    notification.style.cssText = 'margin-bottom: 10px; max-width: 400px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);';
    
    notification.innerHTML = `
        <strong>${type === 'success' ? '✅ Succès' : '❌ Erreur'}</strong><br>
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    `;
    
    container.appendChild(notification);
    
    setTimeout(() => {
        if (notification.parentNode) {
            notification.remove();
        }
    }, 4000);
}

// Gestionnaire pour le formulaire de newsletter
document.addEventListener('DOMContentLoaded', function() {
    const submitNewsletter = document.getElementById('submitNewsletter');
    const newsletterForm = document.getElementById('newsletterForm');
    
    if (submitNewsletter && newsletterForm) {
        submitNewsletter.addEventListener('click', function(e) {
            e.preventDefault();
            
            const emailInput = document.getElementById('newsletterEmail');
            if (!emailInput || !emailInput.value.trim()) {
                showNotification('Veuillez entrer une adresse email valide.', 'error');
                return;
            }
            
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(emailInput.value.trim())) {
                showNotification('Veuillez entrer une adresse email valide.', 'error');
                return;
            }
            
            showGlobalLoader('Abonnement à la newsletter...');
            
            submitNewsletter.style.pointerEvents = 'none';
            submitNewsletter.style.opacity = '0.6';
            
            const formData = new FormData();
            formData.append('email', emailInput.value.trim());
            formData.append('csrfmiddlewaretoken', document.querySelector('[name=csrfmiddlewaretoken]').value);
            
            fetch('{% url "create_newsletter_subscription" %}', {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification(data.message, 'success');
                    newsletterForm.reset();
                } else {
                    showNotification(data.message, 'error');
                }
            })
            .catch(error => {
                console.error('Erreur:', error);
                showNotification('Une erreur est survenue. Veuillez réessayer.', 'error');
            })
            .finally(() => {
                hideGlobalLoader();
                submitNewsletter.style.pointerEvents = 'auto';
                submitNewsletter.style.opacity = '1';
            });
        });
    }
});
</script>

</body>

</html>